export const metadata = {
  title: "Endpoints",
  description: "OG-first API reference for signed image URLs."
}

# Endpoints

## POST /v1/image-url (private)

Mint a signed public URL for an OG image.

### Auth

`Authorization: Bearer hpx_...`

### Request body

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `templateId` | string | Yes | Template document id |
| `width` | number | No | 1-4096, default from template or 1200 |
| `height` | number | No | 1-4096, default from template or 630 |
| `format` | string | No | `png`, `jpeg`, `webp` |
| `quality` | number | No | 0-100 (`jpeg`/`webp`) |
| `tv` | string | No | Template version token override |
| `variables` | object | No | Template variables |

### Response

```json
{
  "url": "https://api.htmlpix.com/v1/image?templateId=...&uid=...&exp=...&v_title=...&sig=...",
  "expiresAt": 1914998400000
}
```

## GET /v1/image (public, signed)

Returns **binary image bytes**. This is the URL you use in OG/Twitter tags.

### Signed query parameters

Reserved params:

- `templateId`
- `uid`
- `exp`
- `sig`
- `width`
- `height`
- `format`
- `quality`
- `tv`

Template variables must use `v_` prefix, for example:

- `v_title=Launch+Day`
- `v_subtitle=New+feature`

### Success response

- `200` + image body (`image/png`, `image/jpeg`, `image/webp`)
- `304` if `If-None-Match` matches

### Cache headers

- `Cache-Control: public, max-age=31536000, immutable`
- `ETag: "<content-hash>"`
- `X-Render-Cached: 1|0`
- `X-Render-Id: <request-id>`

## Deprecated endpoints

- `POST /render` -> returns `410 ENDPOINT_DEPRECATED`
- `GET /images/:id` -> returns `410 ENDPOINT_DEPRECATED`
